# Moves a file or directory from source $1 to target $2
# Creates a link point from old location to the new one
function mvlink() {
  original="$1"
  target="$2"
  
  # Quit if original file/directory is already symlink
  if [[ -L "$original" ]]; then
    echo "$original is a symlink, aborting  !"
    return
  fi

  # Quit if target exists
  if [[ -L "$target" ]]; then
    echo "$target already exists, aborting!"
    return
  fi

  if [[ -d "$target" ]]; then
    target="$target/${original##*/}"
  fi
  original="$original"
  target="$target"
  mv -- "$original" "$target"
  case "$original" in
    */*) 
    case "$target" in
      /*) :;;
      *) target="$(cd -- "$(dirname -- "$target")" && pwd)/${target##*/}"
    esac
  esac
  ln -s -- "$target" "$original"
}